@model List<KL.Models.Job>


<div id="page-wrapper">
    <div class="row" id="content">
        <div class="col-lg-12">
            <h1 class="page-header">Dashboard</h1>

            <div class="card mb-3">
                <div class="card-header">
                    <i class="fas fa-table"></i>
                    Cong Viec Dang Lam @Model.Count
                </div>

                <div class="card-body " id="toggle-ontable">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>Stt</th>
                                    <th>Ten Cong Viec</th>
                                    <th>Noi Dung Tom Tat</th>
                                    <th>File Dinh Kem</th>
                                    <th>Thoi Gian Hoan Thanh</th>
                                    <th>Thuoc Cong Viec</th>
                                    <th>% Hoan thanh</th>
                                </tr>
                            </thead>
                            @using KL.Models.DatabaseModels;
                            @{
                                var db = new Smof();

                                db.SaveChanges();
                            }
                            <tbody>
                                @foreach (var cv in Model)
                                {
                                    <tr class="@cv.ID">
                                        <td>@(Model.ToList().IndexOf(cv) + 1)</td>
                                        <td>@cv.Ten</td>
                                        <td>@cv.NoiDungCongViec</td>
                                        <td>@cv.File</td>
                                        <td>@cv.ThoiGianHoanThanh</td>
                                        <td>@cv.IDkhac</td>
                                        <td></td>
                                        <td><button id="add">see/add plan</button></td>
                                    </tr>
                                }
                            </tbody>


                        </table>
                    </div>
                </div>

                <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
            </div>
        </div>

        <!-- /.col-lg-12 -->
        @db.SaveChanges();
        <script>
            var myModal = $('#myModal').html();
            var planIndex;

            $('#addTask').click(function () {
                var data1 = "<td>" + $('#dropdownlist').clone().html() + "</td>";
                var data = "<tr><td></td><td><input type='text'class='ten'/></td><td><input type='text'  class='nd'/></td>" + data1 + "<td>2011/04/25</td>" + "/<tr>";
                $('#myModal tbody').append(data);


            });
            var t = myModal;
            var modal = document.getElementById('myModal');
            $('button#add').click(function () {

                planIndex = $(this).closest('tr').attr('class');
                $.ajax({
                    url: "/Content/Modal?jobId=" + planIndex,
                    type: "POST",
                    success: function (data) {
                        $("#myModal").replaceWith($(data));
                        $("#myModal").show();
                    }
                });
                //$('#myModal').find("tbody").append(tr);

                //alert($('.modal').attr('id'));
            });



        </script>
    </div>
    <div id="tt"></div>
</div>
<link href="~/Assets/dist/css/Style.css" rel="stylesheet" />
<div id="myModal" class="modal">


</div>
<!-- Modal content -->







